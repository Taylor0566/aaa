<template>
  <view class="admin-sidebar">
    <view class="logo-area">
      <image class="logo" src="/static/logo.png" mode="aspectFit"></image>
      <text class="app-name">ç®¡ç†åå°</text>
    </view>
    
    <view class="menu-list">
      <view 
        class="menu-item" 
        :class="{ active: currentPath === 'dashboard' }"
        @click="switchTab('dashboard')"
      >
        <text class="iconfont">ğŸ“Š</text>
        <text class="menu-text">ç³»ç»Ÿæ¦‚è§ˆ</text>
      </view>
      
      <view 
        class="menu-item" 
        :class="{ active: currentPath === 'user' }"
        @click="switchTab('user')"
      >
        <text class="iconfont">ğŸ‘¥</text>
        <text class="menu-text">ç”¨æˆ·ç®¡ç†</text>
      </view>
      
      <view 
        class="menu-item" 
        :class="{ active: currentPath === 'content' }"
        @click="switchTab('content')"
      >
        <text class="iconfont">ğŸ“</text>
        <text class="menu-text">å†…å®¹ç®¡ç†</text>
      </view>
    </view>
    
    <view class="sidebar-footer">
      <view class="menu-item logout" @click="handleLogout">
        <text class="iconfont">ğŸšª</text>
        <text class="menu-text">é€€å‡ºç™»å½•</text>
      </view>
    </view>
  </view>
</template>

<script setup>
  const props = defineProps({
    currentPath: {
      type: String,
      default: 'dashboard'
    }
  })

  const switchTab = (path) => {
    if (path === props.currentPath) return
    
    let url = ''
    switch (path) {
      case 'dashboard':
        url = '/admin/pages/dashboard/dashboard'
        break
      case 'user':
        url = '/admin/pages/user/user'
        break
      case 'content':
        url = '/admin/pages/content/content'
        break
    }
    
    uni.reLaunch({ url })
  }
  
  const handleLogout = () => {
    uni.removeStorageSync('adminToken')
    uni.removeStorageSync('adminUser')
    uni.reLaunch({ url: '/admin/pages/login/login' })
  }
</script>

<style scoped>
  .admin-sidebar {
    width: 240px;
    height: 100vh;
    background-color: #fff;
    border-right: 1px solid #e5e5e5;
    display: flex;
    flex-direction: column;
    position: fixed;
    left: 0;
    top: 0;
    z-index: 100;
  }

  .logo-area {
    height: 64px;
    display: flex;
    align-items: center;
    padding: 0 24px;
    border-bottom: 1px solid #f5f5f5;
  }

  .logo {
    width: 32px;
    height: 32px;
    margin-right: 12px;
  }

  .app-name {
    font-size: 18px;
    font-weight: 600;
    color: #1d1d1f;
  }

  .menu-list {
    flex: 1;
    padding: 16px 12px;
    overflow-y: auto;
  }

  .menu-item {
    display: flex;
    align-items: center;
    height: 48px;
    padding: 0 12px;
    margin-bottom: 4px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
  }

  .menu-item:hover {
    background-color: #f5f5f7;
  }

  .menu-item.active {
    background-color: #e6f7ff;
    color: #0066cc;
  }
  
  .menu-item.active .menu-text {
    font-weight: 500;
    color: #0066cc;
  }

  .iconfont {
    margin-right: 12px;
    font-size: 20px;
  }

  .menu-text {
    font-size: 15px;
    color: #333;
  }

  .sidebar-footer {
    padding: 16px 12px;
    border-top: 1px solid #f5f5f5;
  }
  
  .logout {
    color: #ff3b30;
  }
  
  .logout:hover {
    background-color: #fff0f0;
  }
  
  .logout .menu-text {
    color: #ff3b30;
  }
</style>